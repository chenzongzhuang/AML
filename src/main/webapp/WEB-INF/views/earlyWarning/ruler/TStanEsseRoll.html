<!DOCTYPE html>
<html>
<head>
<title>实体观察名单</title>

<meta name="keywords" content="keyword1,keyword2,keyword3">
<meta name="description" content="this is my page">
<meta name="content-type" content="text/html; charset=UTF-8">
<link href="${ctxPath}/static/css/bootstrap.min.css" rel="stylesheet" />
<link
	href="${ctxPath}/static/css/plugins/bootstrap-table/bootstrap-table.min.css"
	rel="stylesheet">
<link
	href="${ctxPath}/static/css/plugi
	ns/bootstrap-table/bootstrap-table.min.css"
	rel="stylesheet">
<link href="${ctxPath}/static/css/animate.min.css" rel="stylesheet">
<link href="${ctxPath}/static/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet"
	href="${ctxPath}/static/css/plugins/validate/bootstrapValidator.min.css" />
<link rel="stylesheet" href="${ctxPath}/static/css/style.min.css" />

<link
	href="${ctxPath}/static/css/plugins/jquery-confirm/jquery-confirm.css"
	rel="stylesheet">

<link
	href="${ctxPath}/static/css/plugins/bootstrap-select/bootstrap-select.css"
	rel="stylesheet">
<link href="${ctxPath}/static/css/plugins/select2/select2.css"
	rel="stylesheet">

<link rel="stylesheet"
	href="${ctxPath}/static/css/plugins/ace/ace.min.css" />
<link rel="stylesheet"
	href="${ctxPath}/static/css/plugins/ace-rtl/ace-rtl.min.css" />
<link rel="stylesheet"
	href="${ctxPath}/static/css/plugins/acemts/ace-skins.min.css" />
<link href="${ctxPath}/static/css/plugins/datapicker/datepicker3.css"
	rel="stylesheet">
<script src="${ctxPath}/static/js/plugins/ace-extra/ace-extra.min.js"></script>

<script src="${ctxPath}/static/jquery/jquery-1.11.3.min.js"
	type="text/javascript"></script>
<script src="${ctxPath}/static/js/bootstrap.min.js"></script>
<script
	src="${ctxPath}/static/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script
	src="${ctxPath}/static/js/plugins/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>

<script src="${ctxPath}/static/js/jquery.min.js"></script>
<script src="${ctxPath}/static/js/bootstrap.min.js"></script>
<script
	src="${ctxPath}/static/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script
	src="${ctxPath}/static/js/plugins/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
<script
	src="${ctxPath}/static/js/plugins/validate/bootstrapValidator.min.js"></script>

<script type="text/javascript" src="js/jquery-ui-custom.min.js"></script>

<script
	src="${ctxPath}/static/js/plugins/jquery-confirm/jquery-confirm.js"></script>

<script
	src="${ctxPath}/static/js/plugins/bootstrap-select/bootstrap-select.js"></script>

<script src="${ctxPath}/static/js/plugins/select2/select2.min.js"></script>

<script
	src="${ctxPath}/static/js/plugins/datapicker/bootstrap-datepicker.js"></script>

<script src="${ctxPath}/static/js/plugins/fullcalendar/moment.min.js"></script>

<style>
.back:hover {
	cursor: pointer;
}

.fixed-table-toolbar .btn-group>.btn-group:last-child>.btn {
	border-top-right-radius: 0px;
	border-bottom-right-radius: 0px;
}

label {
	width: 100px;
}

.popup_de {
	background-color: rgba(0, 0, 0, 0.3);
	width: 100%;
	height: 100%;
	position: fixed;
	z-index: 999;
	top: 0;
	left: 0;
	display: none;
}

.bbox {
	display: -webkit-box;
	/* 老版本语法: Safari, iOS, Android browser, older WebKit browsers. */
	display: -moz-box; /* 老版本语法: Firefox (buggy) */
	display: -ms-flexbox; /* 混合版本语法: IE 10 */
	display: -webkit-flex; /* 新版本语法: Chrome 21+ */
	display: -moz-flex;
	display: flex; /* 新版本语法: Opera 12.1, Firefox 22+ */
}

.bbox.xycenter {
	-moz-box-pack: center; /*Firefox*/
	-webkit-box-pack: center; /*Safari,Opera,Chrome*/
	box-pack: center;
	-moz-justify-content: center;
	-webkit-justify-content: center;
	justify-content: center;
	-moz-box-align: center; /*Firefox*/
	-webkit-box-align: center; /*Safari,Opera,Chrome*/
	box-align: center;
	-moz-align-items: center;
	-webkit-align-items: center;
	align-items: center;
}

.popup_de .popup_box {
	width: 300px;
	height: 150px;
	font-family: '微软雅黑';
	background-color: #fff;
	border-radius: 5px;
	color: #333;
}

.popup_de .popup_btn {
	display: inline-block;
	width: 100px;
	height: 30px;
	border-radius: 3px;
	border: 1px solid #1ab394;
	font-size: 15px;
	text-align: center;
	line-height: 30px;
	margin-right: 15px;
	cursor: pointer;
}

.popup_de .show_msg {
	display: block;
	width: 100%;
	text-align: center;
	font-size: 18px;
	margin-top: 40px;
	margin-bottom: 20px;
	padding: 10px;
}

.popup_de .popup_close {
	width: 30px;
	height: 30px;
	font-size: 25px;
	text-align: center;
	display: inline-block;
	cursor: pointer;
	float: right;
	border-top-right-radius: 5px;
	line-height: 30px;
}

.popup_de .popup_close:hover {
	background-color: #1ab394;
	color: #fff;
}

.popup_de .btn_submit {
	background-color: #1ab394;
	color: #fff;
}

.popup_de .btn_box {
	text-align: center;
}
</style>


</head>

<body>
	<div class="tableBody">
		<div class="panel panel-default">
			<div class="panel-heading">查询条件</div>
			<div class="panel-body form-group" style="margin-bottom:0px;">
				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">名单种类：</label>

				<div class="col-sm-2">
					<select class="js-states form-control" id="esseType"
						style="width: 100%" placeholder="---请选择---">
					</select>
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">实体类型：</label>

				<div class="col-sm-2">
					<select class="js-states form-control" style="width: 100%">
					</select>
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">实体名称：</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" name="esseName"
						id="esseName" />
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">证件类型：</label>

				<div class="col-sm-2">
					<select class="js-states form-control" id="esseCustType"
						style="width: 100%">
					</select>
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">证件号码：</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" name="esseCustName"
						id="esseCustName" />
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">联系电话：</label>
				<div class="col-sm-2">
					<input type="text" class="form-control" name="esseTel" id="esseTel" />
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">国籍/注册国家 ：</label>

				<div class="col-sm-2">
					<select class="form-control" id="esseNation" style="width: 100%">
					</select>
				</div>

				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">名单类别：</label>
				<div class="col-sm-2">
					<select class="js-states form-control" id="esseRollCategory"
						style="width: 100%">
					</select>
				</div>



				<label class="col-sm-2 control-label"
					style="text-align: right; margin-top:5px">出生/注册日期：</label>

				<div class="col-sm-2  input-daterange input-group">
					<input type="text" class="input-sm form-control"
						name="startEsseBriDate" id="startEsseBriDate" /><span
						class="input-group-addon"> <i class="fa fa-calendar"></i>
					</span> <span class="input-group-addon">-</span> <input type="text"
						class="input-sm form-control" name="endEsseBriDate"
						id="endEsseBriDate" /><span class="input-group-addon"> <i
						class="fa fa-calendar"></i>
					</span>
				</div>

				<div class="form-group col col-sm-4 padding no-margin-bottom"
					style="margin-left: 5.2%">
					<label class="col col-sm-4 text-right form-label no-padding-left">创建时间：</label>
					<div
						class="col col-sm-8 col-xs-6 no-padding-left input-daterange input-group">
						<input type="text" class="input-sm form-control"
							name="startEsseCreateDate" id="startEsseCreateDate" /><span
							class="input-group-addon" style="margin-left: 5%"> <i
							class="fa fa-calendar"></i>
						</span> <span class="input-group-addon">-</span> <input type="text"
							class="input-sm form-control" name="endEsseCreateDate"
							id="endEsseCreateDate" /><span class="input-group-addon">
							<i class="fa fa-calendar"></i>
						</span>
					</div>
				</div>





				<div class="col-sm-2 pull-right">
					<button class="btn btn-primary" id="search_btn">查询</button>
				</div>

			</div>
		</div>
		<table id="mytab" class="table table-hover"></table>
		<div id="toolbar" class="btn-group pull-right"
			style="margin-right: 20px;">
			<button id="btn_edit" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>修改
			</button>
			<button id="btn_delete" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>删除
			</button>
			<button id="btn_add" type="button" class="btn btn-default">
				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>新增
			</button>
		</div>
	</div>
	<div class="modal fade" style="width:100%;position: absolute;top:10px"
		id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-body">
					<div class="ibox-title">
						<h5>新增规则</h5>
					</div>
					<div class="ibox-content">
						<form id="addForm" method="post" class="form-horizontal"
							action="target.php">
							<div class="form-group">
								<label class="col-sm-2 control-label">实体名称</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseName"
										id="esseName" />
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							<div class="form-group">
								<label class="col-sm-2 control-label">国籍/注册国家</label>
								<div class="col-sm-10">

									<select class="js-states form-control" id="esseNation"
										name="esseNation" style="width: 100%">
									</select>
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							<div class="form-group">
								<label class="col-sm-2 control-label">证件类型</label>
								<div class="col-sm-10">

									<select class="js-states form-control" id="esseCustType"
										name="esseCustType" style="width: 100%">
									</select>
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							<div class="form-group">
								<label class="col-sm-2 control-label">证件号码</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseCustName"
										id="esseCustName" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">出生/注册日期</label>
								<div class="col-sm-10">
									<div
										class="col col-sm-8 no-padding-left no-padding-left input-group date">
										<span class="input-group-addon"> <i
											class="fa fa-calendar"></i>
										</span> <input id="esseBriDate" name="esseBriDate" type="text"
											class="form-control" />
									</div>
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">联系地址</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseAddress"
										id="esseAddress" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">联系电话</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseTel"
										id="esseTel" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">名单类别</label>
								<div class="col-sm-10">

									<select class="js-states form-control" id="esseRollCategory"
										name="esseRollCategory" style="width: 100%">
									</select>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">名单来源</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseRollSource"
										id="esseRollSource" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">名单种类</label>
								<div class="col-sm-10">
									<select class="js-states form-control" id="esseType"
										name="esseType" style="width: 100%">
									</select>
								</div>
							</div>
							<div class="modal-footer">
								<div class="col-sm-2 col-sm-offset-2">
									<button type="button" class="btn btn-primary btn-block"
										id="add_saveBtn">保存</button>
								</div>
								<div class="col-sm-2 col-sm-offset-1">
									<button type="button" class="btn btn-default btn-block"
										id="add_backBtn">返回</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" style="width:100%;position: absolute;top:10px"
		id="editModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-body">
					<div class="ibox-title">
						<h5>修改规则</h5>
					</div>
					<div class="ibox-content">
						<form id="editForm" method="post" class="form-horizontal">
							<div class="form-group" style="display:none">
								<label class="col-sm-2 control-label">rollId</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseId"
										id="editEsseId" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">实体名称</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseName"
										id="editEsseName" />
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							<div class="form-group">
								<label class="col-sm-2 control-label">国籍/注册国家</label>
								<div class="col-sm-10">

									<select class="js-states form-control" id="editEsseNation"
										name="esseNation" style="width: 100%">
									</select>
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							<div class="form-group">
								<label class="col-sm-2 control-label">证件类型</label>
								<div class="col-sm-10">

									<select class="js-states form-control" id="editEsseCustType"
										name="esseCustType" style="width: 100%">
									</select>
								</div>
							</div>
							<div class="hr-line-dashed"></div>
							<div class="form-group">
								<label class="col-sm-2 control-label">证件号码</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseCustName"
										id="editEsseCustName" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">出生/注册日期</label>

								<div class="col-sm-10">
									<div
										class="col col-sm-8 no-padding-left no-padding-left input-group date">
										<span class="input-group-addon"> <i
											class="fa fa-calendar"></i>
										</span> <input id="editEsseBriDate" name="esseBriDate" type="text"
											class="form-control" />
									</div>
								</div>

							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">联系地址</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseAddress"
										id="editEsseAddress" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">联系电话</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseTel"
										id="editEsseTel" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">名单类别</label>
								<div class="col-sm-10">

									<select class="js-states form-control"
										id="editEsseRollCategory" name="esseRollCategory"
										style="width: 100%">
									</select>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">名单来源</label>
								<div class="col-sm-10">
									<input type="text" class="form-control" name="esseRollSource"
										id="editEsseRollSource" />
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label">名单种类</label>
								<div class="col-sm-10">

									<select class="js-states form-control" id="editEsseType"
										name="esseType" style="width: 100%">
									</select>
								</div>
							</div>
					</div>
					<div class="modal-footer">
						<div class="col-sm-2 col-sm-offset-2">
							<button type="button" class="btn btn-primary btn-block"
								id="edit_saveBtn">保存</button>
						</div>
						<div class="col-sm-2 col-sm-offset-1">
							<button type="reset" class="btn btn-default btn-block"
								id="edit_backBtn">重置</button>
						</div>
					</div>
					</form>
				</div>
			</div>
		</div>
	</div>




	<script type="text/javascript">
		$(function(){
		/* getLayerLoad("search_tel","ENABLETYPE");
		getLayerLoad("editRollType","ENABLETYPE");
		getLayerLoad("rollType","ENABLETYPE"); */
		$(".input-daterange,.input-group.date").datepicker({
            language: "zh-CN",
            autoclose: true,//选中之后自动隐藏日期选择框
            clearBtn: true,//清除按钮
            todayBtn: true,//今日按钮
            format: "yyyy-mm-dd"//日期格式，详见 http://bootstrap-datepicker.readthedocs.org/en/release/options.html#format
        });


	//根据窗口调整表格高度
    $(window).resize(function() {
        $("'#mytab").bootstrapTable('resetView', {
            height: tableHeight()
        })
    })
    
    //生成用户数据
    $("#mytab").bootstrapTable({
    	method: 'post',
    	contentType: "application/x-www-form-urlencoded",
    	url:"/earlyWarning/ruler/FindTStanEsseRoll",
    	height:tableHeight(),//高度调整
    	toolbar: "#toolbar",
    	dataType: "json",
    	striped: true, //是否显示行间隔色
    	/* dataField: "res", */
    	pageNumber: 1, //初始化加载第一页，默认第一页
    	pagination:true,//是否分页
    	queryParamsType:"limit",
    	idField: "esseId",
    	queryParams:queryParams,
    	sidePagination:"server",
    	pageSize:10,//单页记录数
    	pageList:[5,10,20,30],//分页步进值
    	showRefresh:true,//刷新按钮
    	showColumns:true,
    	showFooter:true,
    	showPaginationSwitch:true,
    	clickToSelect: true,//是否启用点击选中行
    	toolbarAlign:"right",
    	buttonsAlign:"right",//按钮对齐方式
    	toolbar:"#toolbar",//指定工作栏
        smartDisplay: false,//智能显示分页按钮
   		paginationPreText: "上一页",
    	paginationNextText: "下一页",
    	showToggle:true,                    //是否显示详细视图和列表视图的切换按钮
		cardView: false, 

    	columns:[
        	{
        		title:"全选",
        		field:'select',
        		checkbox:true,
        		width:25,
        		align:'center',
        		valign:'middle'
        	},
        	{field: '序号', title: '序号',
                formatter: function (value, row, index) {
                    return index+1;
            }},
        	{
        		title:"ID",
        		field:"'esseId'",
        		visible:false
        	},
        	{
        		title:"实体名称",
        		field:"esseName",
        		sortable:true
        	},
        	{
        		title:"国籍/注册国家",
        		field:"esseNation",
        		sortable:true
        	},
        	{
        		title:"证件类型",
        		field:"esseCustType",
        	},
        	{
        		title:"证件号码",
        		field:"esseCustName"
        	},
        	{
        		title:"出生/注册日期",
        		field:"esseBriDate",
	        	sortable:true
        	},
        	{
        		title:"联系地址",
        		field:"esseAddress",
        		sortable:true
        	},
        	{
        		title:"联系电话",
        		field:"esseTel",
        		sortable:true
        	},
        	{
        		title:"名单类别",
        		field:"esseRollCategory",
        	},
        	{
        		title:"名单来源",
        		field:"esseRollSource"
        	},
        	{
        		title:"名单种类",
        		field:"esseType",
	        	sortable:true
        	},
        	{
        		title:"创建时间",
        		field:"esseCreateDate",
	        	sortable:true
        	},
        	{
        		title:"创建人",
        		field:"esseCreateBy",
	        	sortable:true
        	}
    	],
    	locale:'zh-CN',//中文支持,
    	formatLoadingMessage: function () {
		    			return "请稍等，正在加载中...";
		    		},
		    		formatNoMatches: function () {  //没有匹配的结果
		    			return "无符合条件的记录";
		    		},
    	responseHandler: function(res) {
			               return {
			                    "total": res.data.records,//总页数
			                    "rows": res.data.rows   //数据
			                 };
		    				
		            },
    })

		  //请求成功后生成去噪规则页面表单内容
		  $("#addForm").bootstrapValidator({
		       	feedbackIcons: {
		               valid: 'glyphicon glyphicon-ok',
		               invalid: 'glyphicon glyphicon-remove',
		               validating: 'glyphicon glyphicon-refresh'
		           },
		           fields: {
		               esseName: {
		                   validators: {
		                       notEmpty: {
		                           message: "实体名称不能为空"
		                       },
							  regexp: {
							   regexp: /^[a-zA-Z0-9_]+$/,
							   message: "实体名称能包含大写、小写、数字和下划线"
							  }/* , 
							  remote: {////ajax验证。服务器端返回的 result:{"valid",true or false} 向服务发送当前input name值，获得一个json数据。例表示正确：{"valid",true} 
					          url: "/earlyWarning/ruler/QueryMateRoleByMateNo", 
					          type:"GET", 
					          message: "该实体名称已经被添加了"
					         } */
		                   }
		               },
		               esseNation: {
		                   validators: {
		                       notEmpty: {
		                           message: "国籍/注册国家不能为空"
		                       }
		                   }
		               },
		               esseCustType:{
		               	validators:{
		               		notEmpty:{
		               			message:"证件类型不能为空"
		               		}
		               	}
		               	
		               },
		               esseCustName: {
		                   validators: {
		                       notEmpty: {
		                           message: "证件号码不能为空"
		                       },
					      regexp:{
					       regexp:/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2]\d)|(3[0|1]))\d{4}$/,
					       message:"证件号码格式错误"
					      }
		                   }
		               },
		               esseBriDate: {
		                   validators: {
		                       notEmpty: {
		                           message: "出生/注册日期不能为空"
		                       }
		                   }
		               },
		               esseAddress: {
		                   validators: {
		                       notEmpty: {
		                           message: "联系地址不能为空"
		                       }
		                   }
		               },
		               esseTel: {
		                   validators: {
		                       notEmpty: {
		                           message: "联系号码不能为空"
		                       },
					      stringlength:{
					       min:11,
					       max:11,
					       message:"请输入11位手机号码"
					      },
					      regexp:{
					       regexp:/^1[3|5|8]{1}[0-9]{9}$/,
					       message:"请输入正确的手机号码"
					      }

		                   }
		               },
		               esseRollCategory: {
		                   validators: {
		                       notEmpty: {
		                           message: "名单类别不能为空"
		                       }
		                   }
		               },
		               esseRollSource: {
		                   validators: {
		                       notEmpty: {
		                           message: "名单来源不能为空"
		                       }
		                   }
		               },
		               esseType: {
		                   validators: {
		                       notEmpty: {
		                           message: "名单种类能为空"
		                       }
		                   }
		               }
		           }
		     });
		    $("#editForm").bootstrapValidator({
		       	feedbackIcons: {
		               valid: 'glyphicon glyphicon-ok',
		               invalid: 'glyphicon glyphicon-remove',
		               validating: 'glyphicon glyphicon-refresh'
		           },
		            fields: {
		               esseName: {
		                   validators: {
		                       notEmpty: {
		                           message: "实体名称不能为空"
		                       },
							  regexp: {
							   regexp: /^[a-zA-Z0-9_]+$/,
							   message: "实体名称能包含大写、小写、数字和下划线"
							  }, 
							  remote: {////ajax验证。服务器端返回的 result:{"valid",true or false} 向服务发送当前input name值，获得一个json数据。例表示正确：{"valid",true} 
					          url: "/earlyWarning/ruler/QueryMateRoleByMateNo", 
					          type:"GET", 
					          message: "该实体名称已经被添加了"
					         }
		                   }
		               },
		               esseNation: {
		                   validators: {
		                       notEmpty: {
		                           message: "国籍/注册国家不能为空"
		                       }
		                   }
		               },
		               esseCustType:{
		               	validators:{
		               		notEmpty:{
		               			message:"证件类型不能为空"
		               		}
		               	}
		               	
		               },
		               esseCustName: {
		                   validators: {
		                       notEmpty: {
		                           message: "证件号码不能为空"
		                       },
		                       creditCard:{
		                       	  message:"证件号码格式错误"
		                       }
		                   }
		               },
		               esseBriDate: {
		                   validators: {
		                       notEmpty: {
		                           message: "出生/注册日期不能为空"
		                       }
		                   }
		               },
		               esseAddress: {
		                   validators: {
		                       notEmpty: {
		                           message: "联系地址不能为空"
		                       }
		                   }
		               },
		               esseTel: {
		                   validators: {
		                       notEmpty: {
		                           message: "联系号码不能为空"
		                       },
					      stringlength:{
					       min:11,
					       max:11,
					       message:"请输入11位手机号码"
					      },
					      regexp:{
					       regexp:/^1[3|5|8]{1}[0-9]{9}$/,
					       message:"请输入正确的手机号码"
					      }

		                   }
		               },
		               esseRollCategory: {
		                   validators: {
		                       notEmpty: {
		                           message: "名单类别不能为空"
		                       }
		                   }
		               },
		               esseRollSource: {
		                   validators: {
		                       notEmpty: {
		                           message: "名单来源不能为空"
		                       }
		                   }
		               },
		               esseType: {
		                   validators: {
		                       notEmpty: {
		                           message: "名单种类能为空"
		                       }
		                   }
		               }
		           }
		       });
   function operateFormatter(value,row,index){
    	if(value==2){
    		return '<i class="fa fa-lock" style="color:red"></i>'
    	}else if(value==1){
    		return '<i class="fa fa-unlock" style="color:green"></i>'
    	}else{
    		return '数据错误'
    	}
    }

    //请求服务数据时所传参数
    function queryParams(params){
    	return{
    		 rows: params.limit,
    		 page:params.offset+1, 
    		 esseType:($('#esseType').val()=="---请选择---")?"":$('#esseType').val(),
			 esseName:$('#esseName').val(),
			 esseCustType:($('#esseCustType').val()=="---请选择---")?"":$('#esseCustType').val(),
			 esseCustName:$('#esseCustName').val(),
			 esseTel:$('#esseTel').val(),
			 esseNation:($('#esseNation').val()=="---请选择---")?"":$('#esseNation').val(),
			 esseRollCategory:($('#esseRollCategory').val()=="---请选择---")?"":$('#esseRollCategory').val(),
			 startEsseBriDate:$('#startEsseBriDate').val(),
			 endEsseBriDate:$('#endEsseBriDate').val(),
			 startEsseCreateDate:$('#startEsseCreateDate').val(),
			 endEsseCreateDate:$('#endEsseCreateDate').val()
    	}
    }
    //查询按钮事件
    $('#search_btn').click(function(){
    	$("#mytab").bootstrapTable('refresh', {url: "/earlyWarning/ruler/FindTStanEsseRoll"});
    })
    
    //增加按钮事件
    $('#btn_add').click(function(){
		/* $('.tableBody').addClass('animated slideOutLeft');
		setTimeout(function(){
			$('.tableBody').removeClass('animated slideOutLeft').css('display','none');
		},500)
		$('.addBody').css('display','block');
		$('.addBody').addClass('animated slideInRight'); */
		
		$('#myModal').modal();
		$('#addForm').data('bootstrapValidator').resetForm(true);
		
		
    })
    //删除按钮与修改按钮的出现与消失
   /*   $('.bootstrap-table').change(function(){
    	var dataArr=$('#mytab .selected');
    	if(dataArr.length==1){
    		$('#btn_edit').css('display','block').removeClass('fadeOutRight').addClass('animated fadeInRight');
    	}else{
    		$('#btn_edit').addClass('fadeOutRight');
    		setTimeout(function(){
    			$('#btn_edit').css('display','none');
    		},400);	
    	}
    	if(dataArr.length>=1){
    		$('#btn_delete').css('display','block').removeClass('fadeOutRight').addClass('animated fadeInRight');
    	}else{
    		$('#btn_delete').addClass('fadeOutRight');
    		setTimeout(function(){
    			$('#btn_delete').css('display','none');
    		},400);	
    	}
    }); */ 
    
							
							
						
							
    //修改按钮事件
    $('#btn_edit').click(function(){
    	var dataArr=$('#mytab').bootstrapTable('getSelections');
    	if(dataArr==null||dataArr==""){
    		$.alert("请选择编辑的列");
    		return false;
    	}else{
    		$('#editEsseId').val(dataArr[0].esseId);
			$('#editEsseName').val(dataArr[0].esseName);
			$('#editEsseNation').val(dataArr[0].esseNation);
			$('#editEsseCustType').val(dataArr[0].esseCustType);
			$('#editEsseCustName').val(dataArr[0].esseCustName);
			$('#editEsseBriDate').val(dataArr[0].esseBriDate);
			$('#editEsseAddress').val(dataArr[0].esseAddress);
			$('#editEsseTel').val(dataArr[0].esseTel);
			$('#esseRollCategory').val(dataArr[0].esseRollCategory);
			$('#editEsseRollSource').val(dataArr[0].esseRollSource);
			$('#editEsseType').val(dataArr[0].esseType);
			
			$('#editModal').modal();
			return true;
    	}
		
    })
    /*
     * 去噪规则管理增加去噪规则页面所有事件
    */
    //增加页面表单验证   
    // Validate the form manually
    $('#add_saveBtn').click(function() {
       //点击保存时触发表单验证
       $('#addForm').bootstrapValidator('validate');
      var mts = $("#addForm").data('bootstrapValidator').isValid();
       if($("#addForm").data('bootstrapValidator').isValid()){
    	   var _info = $('#addForm').serialize();
    	  $.post(
				"/earlyWarning/ruler/AddTStanEsseRoll",
				$('#addForm').serialize(),
				function(data){
					//后台返回添加成功
					$.alert("添加成功");
					 $('#myModal').modal('hide'); 
					/*  $('#addForm').reset(); */
					 $('#mytab').bootstrapTable('refresh', {url: "/earlyWarning/ruler/FindTStanEsseRoll"});
				     $('#addForm').data('bootstrapValidator').resetForm(true);
				     $('#addForm').bootstrapValidator('resetForm'); 
				}
			) 
       }
    });
    //增加页面返回按钮事件
    $('#add_backBtn').click(function() {
    	$('.addBody').addClass('animated slideOutLeft');
    	setTimeout(function(){
			$('.addBody').removeClass('animated slideOutLeft').css('display','none');
		},500)
    	$('.tableBody').css('display','block').addClass('animated slideInRight');  
    	$('#addForm').data('bootstrapValidator').resetForm(true);
    });
    /*
     * 用户管理修改用户页面所有事件
    */
    //修改页面回退按钮事件
    $('#edit_backBtn').click(function(){
    	$('.changeBody').addClass('animated slideOutLeft');
    	setTimeout(function(){
			$('.changeBody').removeClass('animated slideOutLeft').css('display','none');
		},500)
    	$('.tableBody').css('display','block').addClass('animated slideInRight'); 
    	$('#editForm').data('bootstrapValidator').resetForm(true);
    })
    //修改页面保存按钮事件
    $('#edit_saveBtn').click(function(){
    	$('#editForm').bootstrapValidator('validate');
    	if($("#editForm").data('bootstrapValidator').isValid()){
    		 $.post("/earlyWarning/ruler/UpdateTStanEsseRoll",
				$('#editForm').serialize(),
				function(data){
					
					   $('#editModal').modal('hide');  
					   $.alert("修改成功");
				    	$('#mytab').bootstrapTable('refresh', {url: "/earlyWarning/ruler/FindTStanEsseRoll"});
				    	//修改页面表单重置
				    	$('#editForm').reset();
				    	$('#editForm').data('bootstrapValidator').resetForm(true);
				/* 	if(data.suc==true){
						
					}else{
					} */
			    }
    		 ) 
    	}
    })
    //删除事件按钮
   /*  $( "#btn_delete" ).on('click', function(e) {
					e.preventDefault();
				var dataArr=$('#mytab').bootstrapTable('getSelections');
				if(dataArr==null||dataArr==""){
					alert("请选择删除的列");
					return false;
				}else{
					$( "#dialog-confirm" ).removeClass('hide').dialog({
						resizable: false,
						modal: true,
						title: "是否删除",
						title_html: true,
						buttons: [
							{
								html: "<i class='icon-trash bigger-110'></i>&nbsp; 删除",
								"class" : "btn btn-danger btn-xs",
								click: function() {
									var rollId=[];
						        	for(var i=0;i<dataArr.length;i++){
						        		rollId[i]=dataArr[i].rollId;
						        	}
						        	$.post("/earlyWarning/ruler/DeleteTStanAreaRollType",
						        			{rollIdDelete:rollId},
						        			function(data){
						        		if(data.suc==true){
						        			$('.popup_de .show_msg').text('删除成功！');
											$('.popup_de .btn_cancel').css('display','none');
											$('.popup_de').addClass('bbox');
											$('.popup_de .btn_submit').one('click',function(){
												$('.popup_de').removeClass('bbox');
											})
						        			$('#mytab').bootstrapTable('refresh', {url: "/earlyWarning/ruler/FindTStanAreaRollType"});
						        		}else{
						        		}
						        	});
									$( this ).dialog( "close" );
								}
							}
							,
							{
								html: "<i class='icon-remove bigger-110'></i>&nbsp; 返回",
								"class" : "btn btn-xs",
								click: function() {
									$( this ).dialog( "close" );
								}
							}
						]
					});
					return true;
				}
					
				}); */
		
    
    $("#btn_delete").on("click", function () {
    
    var dataArr=$('#mytab').bootstrapTable('getSelections');
    if(dataArr==null||dataArr==""){
					$.alert("请选择删除的列");
					return false;
				}else{
					$.confirm({
                            title: "删除",
                            content: "是否删除",
                            icon: 'fa fa-question-circle',
                            animation: 'scale',
                            closeAnimation: 'scale',
                            opacity: 0.5,
                            buttons: {
                                'confirm': {
                                    text: "删除",
                                    btnClass: 'btn-blue',
                                    action: function () {
                                      var rollId=[];
						        	for(var i=0;i<dataArr.length;i++){
						        		rollId[i]=dataArr[i].mateId+"";
						        	}
						        	$.post("/earlyWarning/ruler/DeleteTStanEsseRoll",
						        			{rollIdDelete:rollId+""},
						        	function(data){
						        			$('#mytab').bootstrapTable('refresh', {url: "/earlyWarning/ruler/QueryTStanEsseRollByMateNo"});
						        			$.alert("删除成功");
						        	});
                                    }
                                },
                                	返回: function () {
                                },
                            }
                          });
					return true;
				}
              });
    
    
    //弹出框取消按钮事件
   　　$('.popup_de .btn_cancel').click(function(){
	   $('.popup_de').removeClass('bbox');
   　　})
    //弹出框关闭按钮事件
     $('.popup_de .popup_close').click(function(){
	   $('.popup_de').removeClass('bbox');
   　　})
   
  	
})
function tableHeight() {
    return $(window).height() - 140;
}

	function getLayerLoad(tcId,lookupType){
			$.ajax({   
				 url:"/tool/ruler/findByType?lookupType="+lookupType,
			     dataType:'json',
			     data:'',
			     jsonp:'callback',
			     async:false,
			     jsonpCallback:"success_jsonpCallback",
			     success:function(data){
			     $("#"+tcId).empty();
			     $("#"+tcId).append("<option>---请选择---</option>");
			     $.each(data.data,function(i,o){
			     var opt="";
			     opt+="<option value='"+o.lookupEn+"'>"+o.lookupDesc+"</option>";
			     $("#"+tcId).append(opt);
			     });
			    /*  $("#"+tcId).selectpicker("refresh"); *///动态加载
			    },error:function(){
			     }
			});
   }
</script>
	<div style="display:none">
		<script src='${ctxPath}/static/js/plugins/stat/stat.js'
			language='JavaScript' charset='gb2312'></script>
	</div>
</body>
</html>



